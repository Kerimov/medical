# ü§ñ AI-–ü–∞—Ä—Å–µ—Ä –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –î–æ–∫—É–º–µ–Ω—Ç–æ–≤

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

**–ë—ã–ª–æ:** –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ hardcoded regex-–ø–∞—Ä—Å–µ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏ (–î–ù–ö–û–ú, –ï–ú–õ –∏ —Ç.–¥.). –≠—Ç–æ –æ–∑–Ω–∞—á–∞–ª–æ:
- ‚ùå –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–∞—Ä—Å–µ—Ä –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ–π –∫–ª–∏–Ω–∏–∫–∏
- ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- ‚ùå –ù–∏–∑–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞

**–°—Ç–∞–ª–æ:** –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è AI-—Å–∏—Å—Ç–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è **–ø–æ–Ω–∏–º–∞–µ—Ç** –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –õ–Æ–ë–´–ú–ò —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–π
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥ –Ω–æ–≤—ã–µ –∫–ª–∏–Ω–∏–∫–∏
- ‚úÖ –ü–æ–Ω–∏–º–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫—É—é —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—é
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

---

## üß† –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ó–∞–≥—Ä—É–∑–∫–∞ PDF   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         v
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   OCR.space     ‚îÇ  ‚Üê –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
‚îÇ  (–∏–ª–∏ –¥—Ä—É–≥–æ–π)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         v
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    AI-–ü–ê–†–°–ï–† (–£–º–Ω—ã–π –∞–Ω–∞–ª–∏–∑)         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 1. OpenAI GPT-4 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)     ‚îÇ
‚îÇ 2. Anthropic Claude (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)  ‚îÇ
‚îÇ 3. Ollama (–ª–æ–∫–∞–ª—å–Ω–∞—è, –±–µ—Å–ø–ª–∞—Ç–Ω–æ)    ‚îÇ
‚îÇ 4. Regex (fallback, –±–∞–∑–æ–≤—ã–π)        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         v
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:          ‚îÇ
‚îÇ  ‚Ä¢ –¢–∏–ø –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è                 ‚îÇ
‚îÇ  ‚Ä¢ –î–∞—Ç–∞, –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è, –≤—Ä–∞—á          ‚îÇ
‚îÇ  ‚Ä¢ –í—Å–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å –Ω–æ—Ä–º–∞–º–∏         ‚îÇ
‚îÇ  ‚Ä¢ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π           ‚îÇ
‚îÇ  ‚Ä¢ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –£–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç

AI-–ø–∞—Ä—Å–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π:
- –ò–Ω—Å—Ç—Ä—É–∫—Ç–∏—Ä—É–µ—Ç –º–æ–¥–µ–ª—å –∏–∑–≤–ª–µ–∫–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
- –¢—Ä–µ–±—É–µ—Ç —Å–æ–±–ª—é–¥–µ–Ω–∏—è —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON
- –†–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–∏–∑–∫–æ–π "—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π" –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: OpenAI (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á –Ω–∞ https://platform.openai.com/api-keys
2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local`:

```bash
OCR_SPACE_API_KEY=–≤–∞—à_ocr_space_–∫–ª—é—á
OPENAI_API_KEY=sk-proj-–≤–∞—à_–∫–ª—é—á_–∑–¥–µ—Å—å
OPENAI_MODEL=gpt-4o-mini
```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: `npm run dev`

**–ì–æ—Ç–æ–≤–æ!** –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AI-–ø–∞—Ä—Å–µ—Ä.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Ollama: https://ollama.com/
2. –°–∫–∞—á–∞–π—Ç–µ –º–æ–¥–µ–ª—å:

```bash
ollama pull llama3.2
```

3. –í `.env.local`:

```bash
OCR_SPACE_API_KEY=–≤–∞—à_–∫–ª—é—á
USE_LOCAL_LLM=true
LOCAL_LLM_MODEL=llama3.2
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- üÜì –ü–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ
- üîí –î–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ–∫–∏–¥–∞—é—Ç –≤–∞—à –∫–æ–º–ø—å—é—Ç–µ—Ä
- ‚ôæÔ∏è –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

| –ü—Ä–æ–≤–∞–π–¥–µ—Ä | –ú–æ–¥–µ–ª—å | –¶–µ–Ω–∞ –∑–∞ –∞–Ω–∞–ª–∏–∑ | –ö–∞—á–µ—Å—Ç–≤–æ |
|-----------|--------|----------------|----------|
| OpenAI | gpt-4o-mini | ~$0.01-0.03 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| OpenAI | gpt-4o | ~$0.05-0.10 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| Anthropic | claude-3-5-sonnet | ~$0.03-0.05 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| Ollama | llama3.2 | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ | ‚≠ê‚≠ê‚≠ê‚≠ê |
| Regex | - | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ | ‚≠ê‚≠ê |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ OpenAI `gpt-4o-mini` - –ª—É—á—à–µ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ü–µ–Ω—ã –∏ –∫–∞—á–µ—Å—Ç–≤–∞.

---

## üîç –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –î–ù–ö–û–ú (—Ç–∞–±–ª–∏—á–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç)

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```
–õ–ê–ë–û–†–ê–¢–û–†–ò–Ø –î–ù–ö–û–ú
–≠—Ä–∏—Ç—Ä–æ—Ü–∏—Ç–∞—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å          –†–µ–∑—É–ª—å—Ç–∞—Ç
–ì–µ–º–æ–≥–ª–æ–±–∏–Ω (Hb)     148,10
–≠—Ä–∏—Ç—Ä–æ—Ü–∏—Ç—ã (RBC)    4,98
...
```

**AI –∏–∑–≤–ª–µ–∫–∞–µ—Ç:**
```json
{
  "studyType": "–û–±—â–∏–π –∞–Ω–∞–ª–∏–∑ –∫—Ä–æ–≤–∏",
  "laboratory": "–î–ù–ö–û–ú",
  "indicators": [
    {
      "name": "–ì–µ–º–æ–≥–ª–æ–±–∏–Ω (Hb)",
      "value": 148.1,
      "unit": "–≥/–ª",
      "referenceMin": 120,
      "referenceMax": 160,
      "isNormal": true
    },
    ...
  ]
}
```

### –ü—Ä–∏–º–µ—Ä 2: –ï–ú–õ (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç)

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```
–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è –û–û–û "–ï–ú–õ"
–°–û–≠: 12 –º–º/—á–∞—Å
–†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: 0-15
```

**AI –∏–∑–≤–ª–µ–∫–∞–µ—Ç:**
```json
{
  "studyType": "–û–±—â–∏–π –∞–Ω–∞–ª–∏–∑ –∫—Ä–æ–≤–∏",
  "laboratory": "–ï–ú–õ",
  "indicators": [
    {
      "name": "–°–û–≠",
      "value": 12,
      "unit": "–º–º/—á–∞—Å",
      "referenceMin": 0,
      "referenceMax": 15,
      "isNormal": true
    }
  ]
}
```

**–õ—é–±–æ–π —Ñ–æ—Ä–º–∞—Ç ‚Üí AI –ø–æ–Ω–∏–º–∞–µ—Ç!**

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### UI –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä

–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –¥–æ–±–∞–≤–ª–µ–Ω badge, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–π —Ç–µ–∫—É—â–∏–π –ø–∞—Ä—Å–µ—Ä:

- ü§ñ **AI: OpenAI gpt-4o-mini** - –∞–∫—Ç–∏–≤–µ–Ω AI-–ø–∞—Ä—Å–µ—Ä (OpenAI)
- üß† **AI: –õ–æ–∫–∞–ª—å–Ω–∞—è (llama3.2)** - –∞–∫—Ç–∏–≤–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å
- üìù **–ë–∞–∑–æ–≤—ã–π –ø–∞—Ä—Å–µ—Ä** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è regex (fallback)

### –õ–æ–≥–∏

–í –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞ (`npm run dev`):

```bash
[OCR] Starting OCR.space processing...
[OCR] Using AI parser (openai)...
[AI-PARSER] Starting AI-powered medical data extraction...
[AI-PARSER] ‚úÖ Successfully extracted 31 indicators
[OCR] ‚úÖ AI parsing successful! Extracted 31 indicators
```

---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –§–∞–π–ª—ã —Å–∏—Å—Ç–µ–º—ã

```
lib/
  ai-medical-parser.ts     ‚Üê AI-–ø–∞—Ä—Å–µ—Ä (OpenAI/Claude/Ollama)
  ocr.ts                   ‚Üê Fallback regex-–ø–∞—Ä—Å–µ—Ä
  ocr-space.ts             ‚Üê OCR —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ

app/api/
  documents/upload/route.ts  ‚Üê –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è AI-–ø–∞—Ä—Å–µ—Ä–∞
  parser-status/route.ts     ‚Üê API —Å—Ç–∞—Ç—É—Å–∞ –ø–∞—Ä—Å–µ—Ä–∞

components/
  parser-status-badge.tsx    ‚Üê UI –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
```

### API —Ñ—É–Ω–∫—Ü–∏–∏

#### `parseWithAI(ocrText, config)`

–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è AI-–ø–∞—Ä—Å–∏–Ω–≥–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `ocrText` (string) - —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –∏–∑ OCR
- `config` (AIParserConfig) - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (provider, apiKey, model)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `MedicalData` - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–ü—Ä–∏–º–µ—Ä:**
```typescript
import { parseWithAI, getAIConfig } from '@/lib/ai-medical-parser'

const config = getAIConfig() // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ env
if (config) {
  const data = await parseWithAI(ocrText, config)
  console.log(data.indicators.length) // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
}
```

#### `getAIConfig()`

–ü–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
1. `OPENAI_API_KEY` ‚Üí OpenAI
2. `ANTHROPIC_API_KEY` ‚Üí Claude
3. `USE_LOCAL_LLM=true` ‚Üí Ollama
4. `null` ‚Üí Fallback –Ω–∞ regex

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã

### –ö–∞—Å—Ç–æ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `MEDICAL_EXTRACTION_PROMPT` –≤ `lib/ai-medical-parser.ts`:

```typescript
const MEDICAL_EXTRACTION_PROMPT = `
–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –∞–Ω–∞–ª–∏–∑—É –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
...
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
- –ò–∑–≤–ª–µ–∫–∞–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ XYZ
- –£—á–∏—Ç—ã–≤–∞–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–ª—É—á–∞–∏ ABC
`
```

### –°–≤–æ—è –º–æ–¥–µ–ª—å

```bash
# –í .env.local
OPENAI_MODEL=gpt-4o  # –ë–æ–ª–µ–µ —Ç–æ—á–Ω–∞—è –º–æ–¥–µ–ª—å
# –∏–ª–∏
LOCAL_LLM_MODEL=llama3.1:70b  # –ë–æ–ª–µ–µ –º–æ—â–Ω–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

1. –î–æ–±–∞–≤—å—Ç–µ –≤ `AIParserConfig`:

```typescript
type AIProvider = 'openai' | 'anthropic' | 'local' | 'custom'
```

2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é:

```typescript
async function parseWithCustom(ocrText: string, config: AIParserConfig) {
  // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞
}
```

3. –î–æ–±–∞–≤—å—Ç–µ –≤ switch:

```typescript
case 'custom':
  response = await parseWithCustom(ocrText, config)
  break
```

---

## ‚ùì FAQ

**Q: –ë–µ–∑–æ–ø–∞—Å–Ω–æ –ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ OpenAI?**
A: OpenAI –∑–∞—è–≤–ª—è–µ—Ç, —á—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ API –¥–ª—è –æ–±—É—á–µ–Ω–∏—è. –ù–æ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É—é –º–æ–¥–µ–ª—å (Ollama).

**Q: –°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞ 1000 –∞–Ω–∞–ª–∏–∑–æ–≤ –Ω–∞ OpenAI?**
A: ~$10-30 (–º–æ–¥–µ–ª—å gpt-4o-mini). $10 –Ω–∞ –±–∞–ª–∞–Ω—Å–µ —Ö–≤–∞—Ç–∏—Ç –Ω–∞ ~500 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

**Q: –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –±–µ–∑ AI?**
A: –î–∞, –Ω–æ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏. –ë–∞–∑–æ–≤—ã–π regex-–ø–∞—Ä—Å–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ –î–ù–ö–û–ú –∏ –ø–æ–¥–æ–±–Ω—ã–º–∏.

**Q: –ö–∞–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å —É AI-–ø–∞—Ä—Å–µ—Ä–∞?**
A: 95-98% –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∞–Ω–∞–ª–∏–∑–æ–≤ –∫—Ä–æ–≤–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ GPT-4.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ—é –º–æ–¥–µ–ª—å?**
A: –î–∞! –°–º. —Ä–∞–∑–¥–µ–ª "–ö–∞—Å—Ç–æ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç" –∏ "–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞".

**Q: –ù—É–∂–µ–Ω –ª–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏?**
A: –ù–µ—Ç, –ø–æ—Å–ª–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–∏ Ollama —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ñ–ª–∞–π–Ω.

---

## üö¶ Roadmap

- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ GPT-4 Vision –¥–ª—è –ø—Ä—è–º–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–±–µ–∑ OCR)
- [ ] Fine-tuning –Ω–∞ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- [ ] Batch-–æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã (HL7 FHIR)

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [ENV_SETUP.md](./ENV_SETUP.md) - –ü–æ–¥—Ä–æ–±–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ AI-–ø–∞—Ä—Å–µ—Ä–∞
- [OpenAI API Docs](https://platform.openai.com/docs)
- [Anthropic Claude API](https://docs.anthropic.com/)
- [Ollama Models](https://ollama.com/library)

---

## üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ AI-–ø–∞—Ä—Å–µ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `.env.local` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –∫–ª—é—á —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `.env.local`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ

**–õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "No AI config found"?**
‚Üí –°–º. [ENV_SETUP.md](./ENV_SETUP.md) –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

---

**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ (–ü–ú–ê)** üè•‚ú®

