# ๐ค AI-ะงะฐั ั ะฟัะธะบัะตะฟะปะตะฝะธะตะผ ะดะพะบัะผะตะฝัะพะฒ

## ๐ ะงัะพ ัะตะฐะปะธะทะพะฒะฐะฝะพ:

ะขะตะฟะตัั ะฒ AI-ะฐััะธััะตะฝัะต ะผะพะถะฝะพ **ะฟัะธะบัะตะฟะปััั ะผะตะดะธัะธะฝัะบะธะต ะดะพะบัะผะตะฝัั** ะธ AI ะฑัะดะตั ะพัะฒะตัะฐัั ะฝะฐ ะฒะพะฟัะพัั ั ััะตัะพะผ ะฒะฐัะธั ัะตะฐะปัะฝัั ะฟะพะบะฐะทะฐัะตะปะตะน!

---

## โจ ะะพะทะผะพะถะฝะพััะธ:

### 1. ะัะธะบัะตะฟะปะตะฝะธะต ะดะพะบัะผะตะฝัะพะฒ
- ๐ ะะฝะพะฟะบะฐ "ะัะธะบัะตะฟะธัั" ะฒ ัะฐัะต
- ๐ ะัะฑะพั ะธะท ัะถะต ะทะฐะณััะถะตะฝะฝัั ะดะพะบัะผะตะฝัะพะฒ
- โ ะะฝะพะถะตััะฒะตะฝะฝะพะต ะฟัะธะบัะตะฟะปะตะฝะธะต
- ๐๏ธ ะฃะดะฐะปะตะฝะธะต ะฟัะธะบัะตะฟะปะตะฝะฝัั ะฟะตัะตะด ะพัะฟัะฐะฒะบะพะน

### 2. ะฃะผะฝัะน ะฐะฝะฐะปะธะท
- ๐ค AI ะฒะธะดะธั ะะกะ ะฟะพะบะฐะทะฐัะตะปะธ ะธะท ะดะพะบัะผะตะฝัะฐ
- ๐ ะะพะฝะธะผะฐะตั ะบะฐะบะธะต ะทะฝะฐัะตะฝะธั ะฒ ะฝะพัะผะต, ะบะฐะบะธะต ะฝะตั
- ๐ฌ ะัะฒะตัะฐะตั ะฝะฐ ะฒะพะฟัะพัั ะฟะพ ะบะพะฝะบัะตัะฝัะผ ะฐะฝะฐะปะธะทะฐะผ
- ๐ฏ ะะตััะพะฝะฐะปะธะทะธัะพะฒะฐะฝะฝัะต ัะตะบะพะผะตะฝะดะฐัะธะธ

### 3. ะะธะทัะฐะปะธะทะฐัะธั
- ๐ท๏ธ Badge ั ะฝะฐะทะฒะฐะฝะธะตะผ ะดะพะบัะผะตะฝัะฐ ะฒ ัะพะพะฑัะตะฝะธะธ
- ๐ ะัะพะฑัะฐะถะตะฝะธะต ัะธะฟะฐ ะธััะปะตะดะพะฒะฐะฝะธั
- ๐ ะะฐัะฐ ะฐะฝะฐะปะธะทะฐ

---

## ๐ ะะฐะบ ะธัะฟะพะปัะทะพะฒะฐัั:

### ะจะฐะณ 1: ะะฐะณััะทะธัะต ะดะพะบัะผะตะฝั
```
1. ะะตัะตะนะดะธัะต ะฒ ัะฐะทะดะตะป "ะะพะบัะผะตะฝัั"
2. ะะฐะณััะทะธัะต ะผะตะดะธัะธะฝัะบะธะน ะฐะฝะฐะปะธะท (PDF/JPG)
3. ะะพะถะดะธัะตัั ะทะฐะฒะตััะตะฝะธั ะพะฑัะฐะฑะพัะบะธ (OCR + AI-ะฟะฐััะธะฝะณ)
```

### ะจะฐะณ 2: ะัะบัะพะนัะต AI-ัะฐั
```
1. ะะฐะถะผะธัะต ะฝะฐ ะธะบะพะฝะบั ัะฐัะฐ (ะฟัะฐะฒัะน ะฝะธะถะฝะธะน ัะณะพะป)
2. ะฃะฒะธะดะธัะต ะบะฝะพะฟะบั ๐ "ะัะธะบัะตะฟะธัั ะดะพะบัะผะตะฝั"
```

### ะจะฐะณ 3: ะัะธะบัะตะฟะธัะต ะดะพะบัะผะตะฝั
```
1. ะะปะธะบะฝะธัะต ะฝะฐ ๐
2. ะัะฑะตัะธัะต ะดะพะบัะผะตะฝั ะธะท ัะฟะธัะบะฐ
3. ะะพะบัะผะตะฝั ะฟะพัะฒะธััั ะฝะฐะด ะฟะพะปะตะผ ะฒะฒะพะดะฐ
```

### ะจะฐะณ 4: ะะฐะดะฐะนัะต ะฒะพะฟัะพั
```
ะัะธะผะตัั ะฒะพะฟัะพัะพะฒ:
- "ะััั ะปะธ ั ะผะตะฝั ะพัะบะปะพะฝะตะฝะธั ะฒ ะฐะฝะฐะปะธะทะต?"
- "ะงัะพ ะพะทะฝะฐัะฐะตั ะฟะพะฒััะตะฝะฝัะน ะณะตะผะพะณะปะพะฑะธะฝ?"
- "ะัะถะฝะพ ะปะธ ะผะฝะต ะพะฑัะฐัะธัััั ะบ ะฒัะฐัั?"
- "ะะฐััะธัััะน ะผะพะธ ะฟะพะบะฐะทะฐัะตะปะธ ะฟัะพัััะผ ัะทัะบะพะผ"
```

---

## ๐ก ะัะธะผะตัั ะดะธะฐะปะพะณะพะฒ:

### ะัะธะผะตั 1: ะะฑัะฐั ะพัะตะฝะบะฐ

**ะั:**
> ๐ [ะะฑัะธะน ะฐะฝะฐะปะธะท ะบัะพะฒะธ - ะะะะะ]  
> ะกะบะฐะถะธ, ะฒัะต ะปะธ ั ะผะตะฝั ะฒ ะฝะพัะผะต?

**AI:**
> ะัะพะฐะฝะฐะปะธะทะธัะพะฒะฐะป ะฒะฐั ะฐะฝะฐะปะธะท ะบัะพะฒะธ ะพั 27.10.2022:
> 
> โ **ะฅะพัะพัะธะต ะฝะพะฒะพััะธ!** ะัะต 23 ะฟะพะบะฐะทะฐัะตะปั ะฒ ะฟัะตะดะตะปะฐั ะฝะพัะผั:
> - ะะตะผะพะณะปะพะฑะธะฝ: 148.1 ะณ/ะป (ะฝะพัะผะฐ)
> - ะญัะธััะพัะธัั: 4.98 ะผะปะฝ/ะผะบะป (ะฝะพัะผะฐ)
> - ะะตะนะบะพัะธัั: ะฒ ะฟัะตะดะตะปะฐั ะฝะพัะผั
> - ะขัะพะผะฑะพัะธัั: ะฒ ะฝะพัะผะต
> 
> ะะฐั ะฐะฝะฐะปะธะท ะบัะพะฒะธ ะฝะต ะฒััะฒะธะป ะฝะธะบะฐะบะธั ะพัะบะปะพะฝะตะฝะธะน. ะญัะพ ะพัะปะธัะฝัะน ัะตะทัะปััะฐั! ๐

### ะัะธะผะตั 2: ะะพะฝะบัะตัะฝัะน ะฟะพะบะฐะทะฐัะตะปั

**ะั:**
> ๐ [ะะฑัะธะน ะฐะฝะฐะปะธะท ะบัะพะฒะธ - ะะะะะ]  
> ะงัะพ ัะฐะบะพะต MCH ะธ ะฟะพัะตะผั ั ะผะตะฝั 30.5?

**AI:**
> MCH (Mean Corpuscular Hemoglobin) - ััะพ ััะตะดะฝะตะต ัะพะดะตัะถะฐะฝะธะต ะณะตะผะพะณะปะพะฑะธะฝะฐ ะฒ ะพะดะฝะพะผ ััะธััะพัะธัะต.
> 
> ะะฐั ะฟะพะบะฐะทะฐัะตะปั: **30.5 ะฟะณ**  
> ะะพัะผะฐ: 27-34 ะฟะณ  
> ะกัะฐััั: โ **ะ ะฝะพัะผะต**
> 
> ะญัะพั ะฟะพะบะฐะทะฐัะตะปั ะฟะพะผะพะณะฐะตั ะพัะตะฝะธัั:
> - ะกะฟะพัะพะฑะฝะพััั ััะธััะพัะธัะพะฒ ะฟะตัะตะฝะพัะธัั ะบะธัะปะพัะพะด
> - ะััะฒะธัั ัะฐะทะฝัะต ัะธะฟั ะฐะฝะตะผะธะธ
> 
> ะะฐัะต ะทะฝะฐัะตะฝะธะต ะฝะฐัะพะดะธััั ะฒ ัะตัะตะดะธะฝะต ะฝะพัะผะฐะปัะฝะพะณะพ ะดะธะฐะฟะฐะทะพะฝะฐ, ััะพ ะพัะตะฝั ัะพัะพัะพ! ๐

### ะัะธะผะตั 3: ะกัะฐะฒะฝะตะฝะธะต ะฐะฝะฐะปะธะทะพะฒ

**ะั:**
> ๐ [ะะฝะฐะปะธะท ะบัะพะฒะธ #1] [ะะฝะฐะปะธะท ะบัะพะฒะธ #2]  
> ะกัะฐะฒะฝะธ ะผะพะธ ะฐะฝะฐะปะธะทั, ะตััั ะปะธ ะดะธะฝะฐะผะธะบะฐ?

**AI:**
> ะกัะฐะฒะฝะธะฒะฐั ะฒะฐัะธ ะฐะฝะฐะปะธะทั:
> 
> **ะะฝะฐะปะธะท #1 (27.10.2022):**
> - ะะตะผะพะณะปะพะฑะธะฝ: 148.1 ะณ/ะป โ
> 
> **ะะฝะฐะปะธะท #2 (30.05.2021):**
> - ะกะะญ: ะฟะพะฒััะตะฝะฐ ะดะพ 12 ะผะผ/ั โ๏ธ
> 
> **ะัะฒะพะดั:**
> 1. ะะตัะฒัะน ะฐะฝะฐะปะธะท ะฟะพะปะฝะพัััั ะฒ ะฝะพัะผะต
> 2. ะะพ ะฒัะพัะพะผ ะตััั ะฝะตะฑะพะปััะพะต ะฟะพะฒััะตะฝะธะต ะกะะญ
> 3. ะะตะบะพะผะตะฝะดัั: ะบะพะฝััะพะปัะฝัะน ะฐะฝะฐะปะธะท ะธ ะบะพะฝััะปััะฐัะธั ัะตัะฐะฟะตะฒัะฐ

---

## ๐ง ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ:

### ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโ
โ  ะะฐะณััะทะบะฐ PDF    โ
โ  (ะะฐะทะดะตะป ะะพะบัะผะตะฝัั)โ
โโโโโโโโโโฌโโโโโโโโโโ
         โ
         v
โโโโโโโโโโโโโโโโโโโโ
โ   OCR + AI       โ  โ ะะทะฒะปะตัะตะฝะธะต ะฒัะตั ะฟะพะบะฐะทะฐัะตะปะตะน
โ   ะะฐััะธะฝะณ        โ
โโโโโโโโโโฌโโโโโโโโโโ
         โ
         v
โโโโโโโโโโโโโโโโโโโโ
โ  ะะฐะทะฐ ะดะพะบัะผะตะฝัะพะฒ โ  โ ะฅัะฐะฝะตะฝะธะต ััััะบัััะธัะพะฒะฐะฝะฝัั ะดะฐะฝะฝัั
โโโโโโโโโโฌโโโโโโโโโโ
         โ
         v
โโโโโโโโโโโโโโโโโโโโ
โ   AI-ะงะฐั         โ  โ ะัะธะบัะตะฟะปะตะฝะธะต ะดะพะบัะผะตะฝัะพะฒ
โ   (Paperclip)    โ
โโโโโโโโโโฌโโโโโโโโโโ
         โ
         v
โโโโโโโโโโโโโโโโโโโโ
โ  Gemini API      โ  โ AI ั ะบะพะฝัะตะบััะพะผ ะดะพะบัะผะตะฝัะพะฒ
โ  + ะะพะฝัะตะบัั      โ
โโโโโโโโโโโโโโโโโโโโ
```

### ะะพะผะฟะพะฝะตะฝัั:

**Frontend (`components/AIChat.tsx`):**
- `availableDocuments` - ัะฟะธัะพะบ ะดะพัััะฟะฝัั ะดะพะบัะผะตะฝัะพะฒ
- `selectedDocuments` - ะฒัะฑัะฐะฝะฝัะต ะดะปั ะฟัะธะบัะตะฟะปะตะฝะธั
- `showDocumentSelector` - UI ะฒัะฑะพัะฐ ะดะพะบัะผะตะฝัะพะฒ
- `attachedDocuments` - ะพัะพะฑัะฐะถะตะฝะธะต ะฒ ัะพะพะฑัะตะฝะธัั

**Backend (`app/api/ai/chat/route.ts`):**
- ะัะธะตะผ `documentIds` ะฒ ะทะฐะฟัะพัะต
- ะะฐะณััะทะบะฐ ะดะฐะฝะฝัั ะธะท `documentsDb`
- ะคะพัะผะธัะพะฒะฐะฝะธะต ะบะพะฝัะตะบััะฐ ะดะปั AI
- ะัะฟัะฐะฒะบะฐ ะฒ Gemini API

### ะัะพะผะฟั ะดะปั AI:

```typescript
ะขั - ะพะฟััะฝัะน ะผะตะดะธัะธะฝัะบะธะน ะฐััะธััะตะฝั.

ะะะะะ:
- ะะฑัััะฝัะน ะผะตะดะธัะธะฝัะบะธะต ัะตัะผะธะฝั ะฟัะพัััะผ ัะทัะบะพะผ
- ะัะปะธ ะตััั ะพัะบะปะพะฝะตะฝะธั - ะพะฑัััะฝะธ ััะพ ะพะฝะธ ะพะทะฝะฐัะฐัั
- ะะต ััะฐะฒั ะดะธะฐะณะฝะพะทั - ัะตะบะพะผะตะฝะดัะน ะบะพะฝััะปััะฐัะธั ะฒัะฐัะฐ
- ะัะดั ัะผะฟะฐัะธัะฝัะผ ะธ ััะฟะพะบะฐะธะฒะฐััะธะผ
- ะัะฟะพะปัะทัะน ะดะฐะฝะฝัะต ะธะท ะฟัะธะบัะตะฟะปะตะฝะฝัั ะดะพะบัะผะตะฝัะพะฒ

ะะะะะซะ ะะ ะะะะฃะะะะขะะ:
[ะะะะฃะะะะข: ะฐะฝะฐะปะธะท.pdf]
ะขะธะฟ: ะะฑัะธะน ะฐะฝะฐะปะธะท ะบัะพะฒะธ
ะะฐัะฐ: 27.10.2022
ะะพะบะฐะทะฐัะตะปะธ:
- ะะตะผะพะณะปะพะฑะธะฝ: 148.1 ะณ/ะป (ะฝะพัะผะฐ: 120-160) โ
- ะญัะธััะพัะธัั: 4.98 ะผะปะฝ/ะผะบะป (ะฝะพัะผะฐ: 4.0-5.5) โ
...

ะะพะฟัะพั ะฟะฐัะธะตะฝัะฐ: {user_message}
```

---

## ๐ ะะตะทะพะฟะฐัะฝะพััั:

โ **ะะฐัะธัะฐ ะดะฐะฝะฝัั:**
- ะะพะบัะผะตะฝัั ะดะพัััะฟะฝั ัะพะปัะบะพ ะฒะปะฐะดะตะปััั (ะฟัะพะฒะตัะบะฐ `userId`)
- JWT-ะฐะฒัะพัะธะทะฐัะธั ะดะปั API
- ะะฐะฝะฝัะต ััะฐะฝัััั in-memory (ะดะปั dev)

โ **ะัะธะฒะฐัะฝะพััั AI:**
- Google Gemini ะฝะต ะธัะฟะพะปัะทัะตั ะดะฐะฝะฝัะต ะดะปั ะพะฑััะตะฝะธั
- ะะปััะตัะฝะฐัะธะฒะฐ: ะปะพะบะฐะปัะฝะฐั ะผะพะดะตะปั (Ollama)

---

## ๐ ะงัะพ ะฒะธะดะธั AI:

ะะปั ะบะฐะถะดะพะณะพ ะฟัะธะบัะตะฟะปะตะฝะฝะพะณะพ ะดะพะบัะผะตะฝัะฐ AI ะฟะพะปััะฐะตั:

```json
{
  "fileName": "ะขะตัั ะฐะฝะฐะปะธะท ะบัะพะฒะธ.pdf",
  "studyType": "ะะฑัะธะน ะฐะฝะฐะปะธะท ะบัะพะฒะธ",
  "studyDate": "2022-10-27",
  "laboratory": "ะะะะะ",
  "indicators": [
    {
      "name": "ะะตะผะพะณะปะพะฑะธะฝ (Hb)",
      "value": 148.1,
      "unit": "ะณ/ะป",
      "referenceMin": 120,
      "referenceMax": 160,
      "isNormal": true
    },
    // ... ะตัะต 22 ะฟะพะบะฐะทะฐัะตะปั
  ],
  "findings": "ะัะต ะฟะพะบะฐะทะฐัะตะปะธ ะฒ ะฟัะตะดะตะปะฐั ะฝะพัะผั..."
}
```

---

## ๐ฏ ะัะตะธะผััะตััะฒะฐ:

### ะะ:
- โ AI ะพัะฒะตัะฐะตั ะพะฑัะธะผะธ ััะฐะทะฐะผะธ
- โ ะัะถะฝะพ ะฒัััะฝัั ะฒะฒะพะดะธัั ะฟะพะบะฐะทะฐัะตะปะธ
- โ ะะตั ะฟะตััะพะฝะฐะปะธะทะฐัะธะธ

### ะะะกะะ:
- โ AI ะฒะธะดะธั ะฒะฐัะธ ัะตะฐะปัะฝัะต ะฐะฝะฐะปะธะทั
- โ ะะตััะพะฝะฐะปะธะทะธัะพะฒะฐะฝะฝัะต ะพัะฒะตัั
- โ ะขะพัะฝัะต ัะตะบะพะผะตะฝะดะฐัะธะธ ะฝะฐ ะพัะฝะพะฒะต ะดะฐะฝะฝัั
- โ ะกัะฐะฒะฝะตะฝะธะต ะฝะตัะบะพะปัะบะธั ะฐะฝะฐะปะธะทะพะฒ
- โ ะะฑัััะฝะตะฝะธะต ะบะพะฝะบัะตัะฝัั ะพัะบะปะพะฝะตะฝะธะน

---

## ๐ ะัะฟะพะปัะทะพะฒะฐะฝะธะต:

### ะะฐะทะพะฒัะน ััะตะฝะฐัะธะน:
```
1. ะะฐะณััะทะธัะต ะฐะฝะฐะปะธะท โ AI ัะฐัะฟะพะทะฝะฐะตั
2. ะัะบัะพะนัะต ัะฐั โ ะัะธะบัะตะฟะธัะต ะดะพะบัะผะตะฝั
3. ะกะฟัะพัะธัะต โ ะะพะปััะธัะต ะฟะตััะพะฝะฐะปัะฝัะน ะพัะฒะตั!
```

### ะัะพะดะฒะธะฝัััะน ััะตะฝะฐัะธะน:
```
1. ะะฐะณััะทะธัะต ะฝะตัะบะพะปัะบะพ ะฐะฝะฐะปะธะทะพะฒ
2. ะัะธะบัะตะฟะธัะต ะฒัะต ะฒ ะพะดะฝะพะผ ัะพะพะฑัะตะฝะธะธ
3. ะกะฟัะพัะธัะต: "ะะฐะบะฐั ะดะธะฝะฐะผะธะบะฐ?"
4. AI ััะฐะฒะฝะธั ะฒัะต ะฐะฝะฐะปะธะทั ะธ ะดะฐัั ะฒัะฒะพะดั!
```

---

## ๐ฐ ะกัะพะธะผะพััั:

| ะะพะผะฟะพะฝะตะฝั | ะัะพะฒะฐะนะดะตั | ะฆะตะฝะฐ |
|-----------|-----------|------|
| OCR | OCR.space | ะะตัะฟะปะฐัะฝะพ |
| ะะฐััะธะฝะณ | OpenAI gpt-4o-mini | ~$0.02/ะดะพะบัะผะตะฝั |
| ะงะฐั | Google Gemini | ะะตัะฟะปะฐัะฝะพ |

**ะัะพะณะพ:** ~$0.02 ะทะฐ ะฐะฝะฐะปะธะท + ะฑะตัะฟะปะฐัะฝัะน ัะฐั

---

## ๐ ะัะธะผะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธั:

```typescript
// Frontend
const response = await fetch('/api/ai/chat', {
  method: 'POST',
  body: JSON.stringify({
    message: "ะงัะพ ะพะทะฝะฐัะฐะตั ะผะพะน ะฐะฝะฐะปะธะท?",
    documentIds: ["doc123", "doc456"], // ะัะธะบัะตะฟะปะตะฝะฝัะต ะดะพะบัะผะตะฝัั
    history: previousMessages
  })
})

// Backend
// AI ะฟะพะปััะฐะตั ะบะพะฝัะตะบัั ะฒัะตั ะดะพะบัะผะตะฝัะพะฒ
// ะ ะพัะฒะตัะฐะตั ะฝะฐ ะพัะฝะพะฒะต ัะตะฐะปัะฝัั ะดะฐะฝะฝัั!
```

---

**๐ ะะพัะพะฒะพ! ะขะตะฟะตัั ั ะฒะฐั ะตััั ะฟะตััะพะฝะฐะปัะฝัะน ะผะตะดะธัะธะฝัะบะธะน ะฐััะธััะตะฝั ั ะดะพัััะฟะพะผ ะบ ะฒะฐัะธะผ ัะตะฐะปัะฝัะผ ะฐะฝะฐะปะธะทะฐะผ!**

---

## ๐ Troubleshooting:

**Q: ะะต ะฒะธะถั ะดะพะบัะผะตะฝัั ะฒ ัะฟะธัะบะต**  
A: ะฃะฑะตะดะธัะตัั, ััะพ ะดะพะบัะผะตะฝัั ะทะฐะณััะถะตะฝั ะฒ ัะฐะทะดะตะปะต "ะะพะบัะผะตะฝัั"

**Q: AI ะฝะต ััะธััะฒะฐะตั ะดะฐะฝะฝัะต**  
A: ะัะพะฒะตัััะต ััะพ ะดะพะบัะผะตะฝั ะพะฑัะฐะฑะพัะฐะฝ (ะตััั ะฟะพะบะฐะทะฐัะตะปะธ)

**Q: ะัะธะฑะบะฐ ะฟัะธ ะพัะฟัะฐะฒะบะต**  
A: ะัะพะฒะตัััะต `GOOGLE_API_KEY` ะฒ `.env.local`

---

**ะะฐะทัะฐะฑะพัะฐะฝะพ ะดะปั ะะตััะพะฝะฐะปัะฝะพะณะพ ะะตะดะธัะธะฝัะบะพะณะพ ะััะธััะตะฝัะฐ (ะะะ)** ๐ฅโจ

